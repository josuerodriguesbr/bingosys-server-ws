<VirtualHost *:80>
    ServerName sorteio.vendasys.com.br
    DocumentRoot /var/www/bingosys/frontend

    <Directory /var/www/bingosys/frontend>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Proxy para WebSocket
    ProxyRequests Off
    ProxyPreserveHost On
    
    # WebSocket route
    RewriteEngine On
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) ws://127.0.0.1:3000/$1 [P,L]

    # Fallback para outros casos (se necess√°rio)
    ProxyPass /ws ws://127.0.0.1:3000/
    ProxyPassReverse /ws ws://127.0.0.1:3000/

    ErrorLog ${APACHE_LOG_DIR}/bingosys_error.log
    CustomLog ${APACHE_LOG_DIR}/bingosys_access.log combined
</VirtualHost>
